<!DOCTYPE html>
<html>
<head>
  <title>Sprawdź prognozę deszczu</title>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
  <h1>Sprawdź prognozę deszczu</h1>
  <input type="text" id="cityInput" placeholder="Wpisz miasto w Polsce" />
  <button onclick="checkRain()">Sprawdź</button>
  <p id="result"></p>

  <script>
    function checkRain() {
      var cityName = document.getElementById("cityInput").value;

      $.ajax({
        url: "http://antistorm.eu/webservice.php",
        method: "GET",
        data: {
          id: cityName
        },
        dataType: "json",
        success: function(data) {
          if (data.s === 1) {
            $("#result").text("Aktywna burza nad miejscowością " + data.m + ".");
          } else {
            if (data.p_b > 30) {
              $("#result").text("Będzie padać deszcz w najbliższym czasie w miejscowości " + data.m + ".");
            } else {
              $("#result").text("Nie ma prognozy opadów deszczu w najbliższym czasie w miejscowości " + data.m + ".");
            }
          }
        },
        error: function() {
          $("#result").text("Wystąpił błąd podczas pobierania prognozy pogody.");
        }
      });
    }
  </script>
</body>
</html>
